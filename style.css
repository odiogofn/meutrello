:root{
  --bg:#ffffff;
  --fg:#0f172a;          /* slate-900 */
  --muted:#64748b;       /* slate-500 */
  --border:#e2e8f0;      /* slate-200 */
  --accent:#2563eb;      /* blue-600 */
  --accent-quiet:#eff6ff;/* blue-50 */
  --danger:#ef4444;      /* red-500 */
  --success:#16a34a;     /* green-600 */
  --surface:#f8fafc;     /* slate-50 */
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color:var(--fg);
  background:var(--surface);
}

.app-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 20px;border-bottom:1px solid var(--border);background:var(--bg)
}
.app-header h1{font-size:20px;margin:0}
.keys-hint{font-size:12px;color:var(--muted)}

.container{max-width:1100px;margin:24px auto;padding:0 16px}

.selectors{
  display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;
  background:var(--bg);border:1px solid var(--border);padding:12px;border-radius:12px
}
.field{display:flex;flex-direction:column;gap:6px;min-width:260px}
label{font-size:12px;color:var(--muted)}
select, input[type="text"], textarea{
  padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff;outline:none
}
select:disabled{background:#f1f5f9;color:#94a3b8}

.actions{margin-left:auto;display:flex;gap:8px}
.btn{
  padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer
}
.btn:hover{background:#f8fafc}
.btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
.btn.primary:hover{filter:brightness(0.98)}
.btn.subtle{background:transparent;border-color:var(--border)}
.btn[disabled]{opacity:.5;cursor:not-allowed}

.cards-section{display:grid;grid-template-columns: 1.3fr .7fr; gap:16px;margin-top:16px}
.cards-list, .card-details{
  background:var(--bg);border:1px solid var(--border);border-radius:12px;min-height:220px
}
.cards-list{padding:10px}
.cards-list.empty-state{display:flex;align-items:center;justify-content:center;color:var(--muted)}

.card-item{
  border:1px solid var(--border);border-radius:10px;padding:10px;margin:8px 0;
  transition:box-shadow .15s ease, transform .05s ease;background:#fff
}
.card-item:hover{box-shadow:0 4px 12px rgba(0,0,0,.06)}
.card-title-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.card-title{margin:0;font-size:16px}
.card-mini-badges{display:flex;gap:8px}
.badge{font-size:12px;color:var(--muted)}
.card-meta{margin-top:6px}
.label-pill{
  display:inline-block;border:1px solid var(--border);padding:2px 8px;border-radius:999px;
  font-size:12px;margin-right:6px;background:#f8fafc
}

.card-actions{margin-top:10px;display:flex;gap:6px}

.card-details{padding:12px}
.card-details.hidden{display:none}
.card-details h2{margin:0 0 6px 0;font-size:18px}
.card-details .muted{color:var(--muted);font-size:12px}
.info-block{margin:12px 0}
.info-block h3{margin:0 0 6px 0;font-size:14px;color:var(--muted)}
.info-block .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:var(--accent-quiet);margin:2px;font-size:12px}
.info-list{list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:6px}
.info-list li{border:1px solid var(--border);padding:6px 8px;border-radius:8px;background:#fff}

.attachment{
  display:flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:8px;padding:6px;margin:6px 0;background:#fff
}
.attachment img{max-height:40px;border-radius:6px}

.history{
  border-top:1px dashed var(--border);padding-top:8px;margin-top:8px
}
.history-item{font-size:13px;margin:6px 0}
.history-item .who{font-weight:600}
.history-item .date{color:var(--muted)}

.icon-btn{
  border:none;background:transparent;cursor:pointer;font-size:18px;color:var(--muted)
}
.icon-btn:hover{color:var(--fg)}

.modal{
  position:fixed;inset:0;background:rgba(0,0,0,.25);display:flex;align-items:center;justify-content:center;
  padding:16px;z-index:50
}
.modal.hidden{display:none}
.modal-content{
  background:#fff;border:1px solid var(--border);border-radius:14px;max-width:860px;width:100%;padding:10px 12px 12px
}
.modal-header{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);padding:6px 4px}
.modal-body{padding:12px 4px}
.modal-footer{display:flex;justify-content:flex-end;gap:8px;border-top:1px solid var(--border);padding:8px 4px}
.grid{display:grid;grid-template-columns:1fr;gap:10px}
@media(min-width:800px){.grid{grid-template-columns:1fr 1fr}}

.uploader{margin-top:8px;border:1px dashed var(--border);border-radius:12px;padding:10px;background:#fafafa}
.uploader-header{display:flex;align-items:center;justify-content:space-between}
.uploader-hint{font-size:12px;color:var(--muted)}
.drop-zone{
  border:2px dashed var(--border);border-radius:12px;padding:16px;margin-top:10px;text-align:center;background:#fff
}
.drop-zone.dragover{background:#f0f9ff;border-color:var(--accent)}
.file-input{display:none}
.uploader-actions{margin-top:8px}
.preview-list{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
.preview-item{
  border:1px solid var(--border);border-radius:10px;padding:8px;background:#fff;width:180px
}
.preview-thumb{height:100px;display:flex;align-items:center;justify-content:center;background:#f8fafc;border-radius:8px;overflow:hidden;margin-bottom:6px}
.preview-thumb img{max-height:100%;max-width:100%}
.preview-name{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.preview-actions{display:flex;justify-content:space-between;align-items:center;margin-top:6px}
.preview-remove{color:var(--danger);cursor:pointer;font-size:12px}
.feedback{margin-top:6px;font-size:13px}
.feedback.success{color:var(--success)}
.feedback.error{color:var(--danger)}
